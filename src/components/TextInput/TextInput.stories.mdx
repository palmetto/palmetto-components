import { useState } from 'react';
import { action } from '@storybook/addon-actions';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import TextInput from './TextInput';
import Box from '../Box/Box';

<Meta title="Components/Form Inputs/TextInput" component={TextInput} />

# TextInput

Use TextInput to render a single-line text input. Masks can also be applied to custom format the input; currently supported masks include Credit Card and Phone.

## Props

<ArgsTable of={TextInput} />

## Default

All that is required to render a basic version of the TextInput is a unique `id`, `label`, `value`, and an onchange event handler passed to the `onChange` prop.

<Canvas>
  <Story name="Default">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="default"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
        />
      );
    }}
  </Story>
</Canvas>

## Required

Use the `isRequired` prop to mark the input as required.

<Canvas>
  <Story name="Required">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="required"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          isRequired
        />
      );
    }}
  </Story>
</Canvas>

## With Help Text

Use the `helpText` prop to add clarifying text beneath the input label.

<Canvas>
  <Story name="Help Text">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="helpText"
          value={value}
          label="Mobile Phone"
          helpText="We willl use this phone number to contact you via text"
          onChange={event => setValue(event.target.value)}
        />
      );
    }}
  </Story>
</Canvas>

## Placeholder

Use the `placeholder` prop to add a custom placeholder.

<Canvas>
  <Story name="Placeholder">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="placeholder"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          placeholder="Custom placeholder..."
        />
      );
    }}
  </Story>
</Canvas>

## Autofocus

Use the `autoFocus` prop to autofocus the input.

<Canvas>
  <Story name="Autofocus">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="autofocus"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          autoFocus
        />
      );
    }}
  </Story>
</Canvas>

## Hidden Label

Use the `hideLabel` prop to not render the label.

<Canvas>
  <Story name="Hidden Label">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="hiddenLabel"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          hideLabel
        />
      );
    }}
  </Story>
</Canvas>

## Disabled

Use the `isDisabled` prop to mark the input as disabled.

<Canvas>
  <Story name="Disabled">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="disabled"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          isDisabled
        />
      );
    }}
  </Story>
</Canvas>

## Disabled with Value

Use the `isDisabled` prop to mark the input as disabled. Disabled inputs can have values that are either preset, or entered by users.

<Canvas>
  <Story name="Disabled with Value">
    {() => {
      const [value, setValue] = useState('Preset value');
      return (
        <TextInput
          id="disabledWithValue"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          isDisabled
        />
      );
    }}
  </Story>
</Canvas>

## Disabled with Placeholder

Use the `isDisabled` prop to mark the input as disabled. Disabled inputs can have placeholders.

<Canvas>
  <Story name="Disabled with Placeholder">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="disabledWithPlaceholder"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          isDisabled
          placeholder="Useful placeholder..."
        />
      );
    }}
  </Story>
</Canvas>

## Clearable

Use the `onClear` prop to display a clear icon (x) when the input has a value. `onClear` will fire
a callback function when the clear icon is clicked, which can then be handled to clear the value.

<Canvas>
  <Story name="Clearable">
    {() => {
      const [value, setValue] = useState('clear me');
      return (
        <TextInput
          id="required"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          onClear={event => setValue('')}
          isRequired
        />
      );
    }}
  </Story>
</Canvas>

## With Phone Mask

Use the `type` prop to mark the input type as "tel". Use the `inputMask` prop to set the mask as "phone".

<Canvas>
  <Story name="With Phone Mask">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="withPhoneMask"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          type="tel"
          inputMask="phone"
        />
      );
    }}
  </Story>
</Canvas>

## With Credit Card Mask

Use the `type` prop to mark the input type as "tel". Use the `inputMask` prop to set the mask as "creditCard".

<Canvas>
  <Story name="With Credit Card Mask">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="withCreditCardMask"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          type="tel"
          inputMask="creditCard"
        />
      );
    }}
  </Story>
</Canvas>

## Max Length

Use the `maxLength` prop to limit the number of characters that can be entered into an input.

<Canvas>
  <Story name="Max Length">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="maxLength"
          value={value}
          label="Label"
          maxLength="5"
          onChange={event => setValue(event.target.value)}
          placeholder="Can't enter more than 5 characters..."
        />
      );
    }}
  </Story>
</Canvas>

## Required with Error

Use the `error` prop to mark the input as invalid. `error` accepts a `boolean`, `string`, or `node`. A `boolean` is passed in this example.

<Canvas>
  <Story name="Required with Error">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="requiredWithError"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          error={true}
          isRequired
        />
      );
    }}
  </Story>
</Canvas>

## Required with Error and Validation Message

Pass a `string` or `node` to the `error` prop to render a validation message.

<Canvas>
  <Story name="Required with Error and Validation Message">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="requiredWithValidationMessage"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          isRequired
          error="Helpful validation message"
        />
      );
    }}
  </Story>
</Canvas>

## Not Required with Error and Validation Message

An input does not need to be marked as required to render a validation message.

<Canvas>
  <Story name="Not Required with Error and Validation Message">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="notRequiredWithValidationMessage"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          error="Helpful validation message"
        />
      );
    }}
  </Story>
</Canvas>

## Error with Hidden Label

<Canvas>
  <Story name="Error with Hidden Label">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="errorWithHiddenLabel"
          value={value}
          label="Label"
          hideLabel
          onChange={event => setValue(event.target.value)}
          error={true}
        />
      );
    }}
  </Story>
</Canvas>

## Custom Classes

Use the `className` prop to add a custom class, or classes to an input.

<Canvas>
  <Story name="Custom Classes">
    {() => {
      const [value, setValue] = useState('');
      return (
        <TextInput
          id="customClasses"
          value={value}
          label="Label"
          onChange={event => setValue(event.target.value)}
          className="background-color-primary"
        />
      );
    }}
  </Story>
</Canvas>

<Canvas>
  <Story name="Adjacent Inputs">
    {() => {
      const [value1, setValue1] = useState('');
      const [value2, setValue2] = useState('');
      const [value3, setValue3] = useState('');
      return (
        <Box
          direction={{
            base: 'column',
            tablet: 'row',
            desktop: 'row',
            hd: 'row',
          }}
          childGap={{
            base: 'sm',
            tablet: 'md',
            desktop: 'lg',
            hd: 'lg',
          }}
          width="100%"
        >
          <TextInput
            value={value1}
            label="input 1"
            onChange={event => setValue1(event.target.value)}
          />
          <TextInput
            value={value2}
            label="input 2"
            onChange={event => setValue2(event.target.value)}
          />
        </Box>
      );
    }}
  </Story>
</Canvas>
