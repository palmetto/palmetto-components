import { useState } from 'react';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import DateInput from './DateInput';
import Box from '../Box/Box';
import Heading from '../Heading/Heading';

<Meta title="Components/Form Inputs/DateInput" component={DateInput} />

# DateInput

Use a DateInput to allow users to select a date to place in an input field.

## Props

<ArgsTable of={DateInput} />

## Default

The DateInput is composed of 3 components which each can be stylized based on their props. They are:

1. [DatePicker](?path=/docs/components-datepicker--default-story)
2. [Popover](?path=/docs/components-popover--demo)
3. [TextInput](http://localhost:6006/?path=/docs/components-form-inputs-textinput--default-story)

The `DateInput` uses sensible defaults for these to allow for very straightforward ergonomics that allow users to
select dates with minimal work.

<Canvas>
  <Story name="Basic Usage">
    {() => {
      const [selectedDate, setSelectedDate] = useState(null);
      const handleClear = () => {
        setSelectedDate(null);
      };
      return (
        <Box childGap="md">
          <Box height="300px" width="300px">
            <DateInput
              datePickerProps={{
                selected: selectedDate,
                onChange: setSelectedDate,
              }}
              textInputProps={{
                placeholder: 'e.g. 11/02/2020',
                onClear: handleClear,
                id: 'defaultDatePicker',
                name: 'selectDate',
                label: 'Select Date',
              }}
            />
          </Box>
        </Box>
      );
    }}
  </Story>
</Canvas>

## Date Range

<Canvas>
  <Story name="Date Range">
    {() => {
      const [startDate, setStartDate] = useState(null);
      const [endDate, setEndDate] = useState(null);
      const setDate = ([startDate, endDate]) => {
        setStartDate(startDate);
        setEndDate(endDate);
      };
      const handleClear = () => {
        setStartDate(null);
        setEndDate(null);
      };
      return (
        <Box childGap="md">
          <Box height="300px" width="500px">
            <DateInput
              datePickerProps={{
                onChange: setDate,
                selected: startDate,
                selectsRange: true,
                startDate,
                endDate,
              }}
              textInputProps={{
                onClear: handleClear,
                id: 'myDateRangePicker',
                name: 'myDateRangePicker',
                label: 'Select Date Range',
              }}
            />
          </Box>
        </Box>
      );
    }}
  </Story>
</Canvas>

## Custom Date Format

You can manipulate the format on the input field by using the `dateFormat` and `dateOptions`
props. Under the hood our component uses the [date-fns `format` function](https://date-fns.org/v2.16.1/docs/format)
to generate a string based on these options.

<Canvas>
  <Story name="Custom Date Format">
    {() => {
      const [selectedDate, setSelectedDate] = useState(new Date('2020, 11, 3'));
      const [inputValue, setInputValue] = useState('');
      const handleClear = () => {
        setSelectedDate(null);
      };
      return (
        <Box childGap="md">
          <Box height="300px" width="300px">
            <DateInput
              dateFormat={'MMMM dd, yyyy'}
              datePickerProps={{
                selected: selectedDate,
                onChange: setSelectedDate,
              }}
              textInputProps={{
                onClear: handleClear,
                id: 'withCustomDateFormat',
                name: 'selectDate',
                label: 'Select Date',
              }}
            />
          </Box>
          <Box>
            <p>Selected Date (as ISO String): {selectedDate ? selectedDate.toISOString() : null}</p>
          </Box>
        </Box>
      );
    }}
  </Story>
</Canvas>
