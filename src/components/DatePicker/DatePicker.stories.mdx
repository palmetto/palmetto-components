import { useState } from 'react';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import DatePicker from './DatePicker';
import Box from '../Box/Box';
import Heading from '../Heading/Heading';

<Meta title="Components/DatePicker" component={DatePicker} />

# DatePicker

Use a DatePicker when a user needs to select a date and time.

## Props

<ArgsTable of={DatePicker} />

## Default

<Canvas>
  <Story name="default">
    {() => {
      const [selectedDate, setSelectedDate] = useState(new Date());
      return (
        <Box childGap="md">
          <DatePicker onChange={setSelectedDate} selected={selectedDate} />
          <p>Selected Date: {selectedDate.toISOString()}</p>
        </Box>
      );
    }}
  </Story>
</Canvas>

## With Date Range

<Canvas>
  <Story name="date range">
    {() => {
      const [startDate, setStartDate] = useState(new Date());
      const [endDate, setEndDate] = useState(new Date())
      const setDate = ([startDate, endDate]) => {
        setStartDate(startDate);
        setEndDate(endDate);
      }
      return (
        <Box childGap="md">
          <DatePicker
            onChange={setDate}
            selected={startDate}
            startDate={startDate}
            endDate={endDate}
            selectsRange
          />
          <p>
            Selected Dates:
            {startDate && startDate.toISOString()}
            -
            {endDate && endDate.toISOString()}
          </p>
        </Box>
      );
    }}
  </Story>
</Canvas>


## With Min/Max Dates

<Canvas>
  <Story name="Min/max dates">
    {() => {
      const [startDate, setStartDate] = useState(new Date());
      const min = new Date();
      min.setDate(min.getDate() - 5);
      const max = new Date();
      max.setDate(max.getDate() + 5);
      return (
        <Box childGap="md">
          <DatePicker
            selected={startDate}
            onChange={setStartDate}
            minDate={min}
            maxDate={max}
          />
          <p>Selected Date: {startDate.toISOString()}</p>
        </Box>
      );
    }}
  </Story>
</Canvas>


## Month Picker

<Canvas>
  <Story name="month picker">
    {() => {
      const [startDateOne, setStartDateOne] = useState(new Date());
      const [startDateTwo, setStartDateTwo] = useState(new Date());
      const [startDateThree, setStartDateThree] = useState(new Date());
      return (
        <Box display="flex" direction="row" childGap="md">
          <Box childGap="md" display="flex" direction="column" alignItems="center" width="33">
            <Heading size="md">Default</Heading>
            <DatePicker
              selected={startDateOne}
              onChange={setStartDateOne}
              showMonthYearPicker
            />
            <p>Selected Date:</p>
            <p style={{ fontSize: '0.8rem' }}>{startDateOne.toISOString()}</p>
          </Box>
          <Box childGap="md" display="flex" direction="column" alignItems="center" width="33">
            <Heading size="md">With full month name</Heading>
            <DatePicker
              selected={startDateTwo}
              onChange={setStartDateTwo}
              showMonthYearPicker
              showFullMonthYearPicker
            />
            <p>Selected Date:</p>
            <p style={{ fontSize: '0.8rem' }}>{startDateTwo.toISOString()}</p>
          </Box>
          <Box childGap="md" display="flex" direction="column" alignItems="center" width="33">
            <Heading size="md">With Two-column layout</Heading>
            <DatePicker
              selected={startDateThree}
              onChange={setStartDateThree}
              showMonthYearPicker
              showFullMonthYearPicker
              showTwoColumnMonthYearPicker
            />
            <p>Selected Date:</p>
            <p style={{ fontSize: '0.8rem' }}>{startDateThree.toISOString()}</p>
          </Box>
        </Box>
      )
    }}
  </Story>
</Canvas>


## Show Multiple Months

<Canvas>
  <Story name="Multiple Months">
      {() => {
        const [startDate, setStartDate] = useState(new Date());
        const [endDate, setEndDate] = useState(new Date())
        const setDate = ([startDate, endDate]) => {
          console.log(startDate, endDate);
          setStartDate(startDate);
          setEndDate(endDate);
        }
        return (
          <Box childGap="md">
            <DatePicker
              onChange={setDate}
              selected={startDate}
              startDate={startDate}
              endDate={endDate}
              selectsRange
              monthsShown={2}
            />
            Start Date: <p style={{ fontSize: '0.75rem '}}>{startDate && startDate.toISOString()}</p>
            End Date:<p style={{ fontSize: '0.75rem '}}>{endDate && endDate.toISOString()}</p>
          </Box>
        );
      }}
  </Story>
</Canvas>

## With Time Picker

<Canvas>
  <Story name="With Time picker">
      {() => {
        const [startDate, setStartDate] = useState(new Date("1993/09/28"));
        return (
          <Box childGap="md">
            <DatePicker
              selected={startDate}
              onChange={date => setStartDate(date)}
              showTimeSelect
              timeIntervals={15}
              timeCaption="Time"
            />
            Selected Date: <p style={{ fontSize: '0.75rem '}}>{startDate && startDate.toISOString()}</p>
          </Box>
        );
      }}
  </Story>
</Canvas>

## Open by default on a specific date

<Canvas>
  <Story name="Open on date">
      {() => {
        const [startDate, setStartDate] = useState(new Date("1993/09/28"));
        return (
          <Box childGap="md">
            <DatePicker
              onChange={setStartDate}
              selected={startDate}
              openToDate={new Date("1993/09/28")}
            />
            Selected Date: <p style={{ fontSize: '0.75rem '}}>{startDate && startDate.toISOString()}</p>
          </Box>
        );
      }}
  </Story>
</Canvas>


## With Children

<Canvas>
  <Story name="with children">
    {() => {
      const [selectedDate, setSelectedDate] = useState(new Date());
      return (
        <Box childGap="md">
          <DatePicker onChange={setSelectedDate} selected={selectedDate}>
            <Box
              display="block"
              style={{ textAlign: 'center' }}
              color="primary"
            >
              It will be sunny out today!
            </Box>
          </DatePicker>
          <p>Selected Date: {selectedDate.toISOString()}</p>
        </Box>
      );
    }}
  </Story>
</Canvas>

## Custom Day ClassName

<Canvas>
  <Story name="day classname">
    {() => {
      const [selectedDate, setSelectedDate] = useState(new Date());
      return (
        <Box childGap="md">
          <DatePicker
            onChange={setSelectedDate}
            selected={selectedDate}
            dayClassName={date => date.getDay() < 3 ? 'font-color-danger' : undefined }
          />
          <p>Selected Date: {selectedDate.toISOString()}</p>
        </Box>
      );
    }}
  </Story>
</Canvas>