import { useState } from 'react';
import { action } from '@storybook/addon-actions';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import { Box } from '../Box/Box';
import { CategoryFilter } from './CategoryFilter';

<Meta title="Components/CategoryFilter/Overview" component={CategoryFilter} />

# CategoryFilter

The CategoryFilter component consists of a button with text, typically used in a design to display high level categories on page.

## Usage Guidelines

- Should appear in a group of a related choices
- Can be used to denote for single (e.g. t-shirt sizes) or multiple choice (e.g. blog categories) scenarios

## Content Guidelines

- A single word is preferred when categorizing content. For example, "Solar" or "Storage"
- Limit the number of words within a badge to two. For example, "Company News" or "Smart Home"

<Canvas isExpanded>
  <Story name="Default">
    {() => {
      const [isSelected, setIsSelected] = useState({
        chocolate: false,
        vanilla: true,
        strawberry: false,
      });
      const handleSelect = selectedKey => {
        setIsSelected(prevIsSelected => ({
          ...prevIsSelected,
          [selectedKey]: !prevIsSelected[selectedKey],
        }));
      };
      return (
        <Box direction="row" childGap="xs">
          <CategoryFilter
            isSelected={isSelected.chocolate}
            onClick={() => handleSelect('chocolate')}
          >
            chocolate
          </CategoryFilter>
          <CategoryFilter isSelected={isSelected.vanilla} onClick={() => handleSelect('vanilla')}>
            vanilla
          </CategoryFilter>
          <CategoryFilter
            isSelected={isSelected.strawberry}
            onClick={() => handleSelect('strawberry')}
          >
            strawberry
          </CategoryFilter>
        </Box>
      );
    }}
  </Story>
</Canvas>

## Props

<ArgsTable of={CategoryFilter} />

## Sizes

The CategoryFilter can be sized with one of `xs`, `sm`, `md`, `lg`, or a `ResponsiveProp` object with any of those values.

<Canvas isExpanded>
  <Story name="Sizes">
    {() => {
      const [isSelected, setIsSelected] = useState({
        xs: false,
        sm: false,
        md: false,
        lg: false,
        responsive: false,
      });
      const handleSelect = selectedKey => {
        setIsSelected(prevIsSelected => ({
          ...prevIsSelected,
          [selectedKey]: !prevIsSelected[selectedKey],
        }));
      };
      return (
        <Box direction="row" childGap="sm" wrap>
          <CategoryFilter isSelected={isSelected.xs} onClick={() => handleSelect('xs')} size="xs">
            Extra Small
          </CategoryFilter>
          <CategoryFilter isSelected={isSelected.sm} onClick={() => handleSelect('sm')} size="sm">
            Small
          </CategoryFilter>
          <CategoryFilter isSelected={isSelected.md} onClick={() => handleSelect('md')} size="md">
            Medium
          </CategoryFilter>
          <CategoryFilter isSelected={isSelected.lg} onClick={() => handleSelect('lg')} size="lg">
            Large
          </CategoryFilter>
          <CategoryFilter
            isSelected={isSelected.responsive}
            onClick={() => handleSelect('responsive')}
            size={{ base: 'xs', tablet: 'sm', desktop: 'md', hd: 'lg' }}
          >
            Responsive
          </CategoryFilter>
        </Box>
      );
    }}
  </Story>
</Canvas>

## Disabled

Use the disabled prop to indicate the button is not clickable in its currenty state.

<Canvas isExpanded>
  <Story name="Disabled">
    {() => {
      const [isSelected, setSelected] = useState(false);
      return (
        <Box direction="row" childGap="sm">
          <CategoryFilter isSelected={false} isDisabled>
            Unselected
          </CategoryFilter>
          <CategoryFilter isSelected={true} isDisabled>
            Selected
          </CategoryFilter>
        </Box>
      );
    }}
  </Story>
</Canvas>

## Component Tokens

<table>
  <thead>
    <tr>
      <th>token name</th>
      <th>default value</th>
    </tr>
  </thead>
  <tbody>
    {(() => {
      const tokens = {
        '--category-filter-background-color': 'transparent',
        '--category-filter-background-color-hover': '--color-brand-grey-100',
        '--category-filter-selected-background-color': '--color-brand-primary-500',
        '--category-filter-selected-background-color-hover': '--color-brand-primary-600',
        '--category-filter-box-shadow-focus': '0 0 0 4px --color-brand-grey-200',
        '--category-filter-selected-box-shadow-focus': '0 0 0 4px --color-brand-success-200',
      };
      return Object.entries(tokens).map(([name, entry], i) => (
        <tr key={i}>
          <td>
            <code>{name}</code>
          </td>
          <td>
            <code>{entry}</code>
          </td>
        </tr>
      ));
    })()}

  </tbody>
</table>
