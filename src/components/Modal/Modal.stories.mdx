import { useState } from 'react';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import Modal from './Modal';
import Box from '../Box/Box';
import Button from '../Button/Button';

<Meta title="Components/Modal" component={Modal} />

# Modal

Modals are containers appearing in front of the main content to provide critical information or an actionable piece of content.
These are specifically great for presenting new flows while preserving the state of content.

The default behavior of a Modal is to focus on the first focusable item.
Therefore, you should ensure that the first focusable item is non-destructive, such as a "cancel" or close button.

## Basic Usage

In order to hide andshow the Modal, set the Modal's `isOpen` prop to true or false.

<Canvas>
  <Story name="Example">
    {() => {
      const [showModal, setShowModal] = React.useState(false);
      const open = () => setShowModal(true);
      const close = () => setShowModal(false);
      return (
        <div>
          <Button variant="light" onClick={open}>
            Show Modal
          </Button>
          <Modal isOpen={showModal} onDismiss={close}>
            <Modal.Header title="The Modal Title" />
            <Box padding="lg">Modal content</Box>
            <Modal.Footer>
              <Button variant="light" onClick={close}>
                Cancel
              </Button>
              <Button variant="primary">Primary Action</Button>
            </Modal.Footer>
          </Modal>
        </div>
      );
    }}
  </Story>
</Canvas>

## Props

<ArgsTable of={Modal} />

### Close button

Set the `closeButton` prop to true to automatically add a close button in the `<Modal.Header />`.
Note that the callback to close the Modal is assigned on the Modal component itself, not `<Modal.Header />`.

<Canvas>
  <Story name="Close button">
    {() => {
      const [showModal, setShowModal] = React.useState(false);
      const open = () => setShowModal(true);
      const close = () => setShowModal(false);
      return (
        <div>
          <Button variant="light" onClick={open}>
            Show Modal
          </Button>
          <Modal isOpen={showModal} onDismiss={close}>
            <Modal.Header title="The Modal Title" closeButton />
            <p>content</p>
            <button onClick={close}>Close</button>
          </Modal>
        </div>
      );
    }}
  </Story>
</Canvas>

### Without a title

When a `<Modal.Header/>` isn't provided, a header isn't rendered.

<Canvas>
  <Story name="Without Header">
    {() => {
      const [showModal, setShowModal] = React.useState(false);
      const open = () => setShowModal(true);
      const close = () => setShowModal(false);
      return (
        <div>
          <Button variant="light" onClick={open}>
            Show Modal
          </Button>
          <Modal isOpen={showModal} onDismiss={close}>
            <Box padding="lg">Modal content</Box>
            <Modal.Footer>
              <Button variant="light" onClick={close}>
                Cancel
              </Button>
              <Button variant="primary">Primary Action</Button>
            </Modal.Footer>
          </Modal>
        </div>
      );
    }}
  </Story>
</Canvas>
