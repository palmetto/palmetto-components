import { useState } from 'react';
import { action } from '@storybook/addon-actions';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import Badge from './Badge';
import Box from '../Box/Box';
import Button from '../Button/Button';

<Meta
  title="Components/Badge"
  component={Badge}
/>

# Badge

Use badge to display feedback for users about specific actions, or states of an application. All that is required to render a basic version of an Badge is a `message` prop which will contain text
or a ReactNode to be rendered.

<Canvas isExpanded>
  <Box direction="row">
    <Badge
      message="Hello world!"
    />
  </Box>
</Canvas>

## Props

<ArgsTable of={Badge} />


## Variants

Badges come in different variants based on the kind of feedback being delivered to the user.

<Canvas>
  <Story name="Variants">
    {() => {
      const variants = [
        'default',
        'info',
        'tertiary',
        'success',
        'warning',
        'danger',
      ];
      return (
        <Box direction="row">
         {variants.map(variant => <Badge message={variant} variant={variant} />)}
        </Box>
      );
    }}
  </Story>
</Canvas>

## Sizes

<Canvas>
  <Story name="Sizes">
    {() => {
      return (
        <>
          <Box direction="row" className="m-bottom-md">
            <Badge
              message="Small"
              size="sm"
            />
          </Box>
          <Box direction="row" className="m-bottom-md">
            <Badge
              message="Base"
              size="md"
            />
          </Box>
          <Box direction="row" className="m-bottom-md">
            <Badge
              message="Large"
              size="lg"
            />
          </Box>
          <Box direction="row">
            <Badge
              message="X-Large"
              size="xl"
            />
          </Box>
        </>
      )
    }}
  </Story>
</Canvas>


## Custom Class

You can apply a custom class to your badge with the `className` prop. Here we have added a 3xl bottom margin.

<Canvas>
  <Story name="Custom Class">
    {() => {
      return (
        <Box direction="row">
          <Badge
            message="Hello world!"
            variant="success"
            className="m-bottom-3xl"
          />
        </Box>
      );
    }}
  </Story>
</Canvas>

## With Icon

You can choose to display a standard icon for each variant of notification, based on their nature.

<Canvas>
  <Story name="With Icon">
    {() => {
      const variants = [
        'default',
        'info',
        'tertiary',
        'success',
        'warning',
        'danger',
      ];
      const message = (variant) => `
        This is a ${variant} badge. It also has longer text to see what these badge
        can look like when broken into multiple lines. This one will definitely
        break into multiple lines in most standard screen resolutions.
      `;
      return (
        <>
          {variants.map((variant, index) => (
            <Box childGap="sm" direction="row">
              <Badge
                message={message(variant)}
                key={variant}
                title={index % 2  ? variant.charAt(0).toUpperCase() + variant.slice(1) : ''}
                variant={variant}
                hasIcon
                className="m-bottom-md"
              />
            </Box>
          ))}
        </>
      );
    }}
  </Story>
</Canvas>

## With Custom JSX in the message

The badge can display any custom JSX that is passed into the `message` prop, not just a string variant.

<Canvas>
  <Story name="With Custom JSX Message">
    {() => {
      const myMessage = (
        <p>Looks like something went wrong.</p>
      );
      return (
        <Box direction="row">
          <Badge
            message={myMessage}
            variant="danger"
          />
        </Box>
      );
    }}
  </Story>
</Canvas>

## With Render Function

If you prefer to pass a render function to the badge rather than a static `ReactNode`, you can pass a function
that returns a `ReactNode` to the `render` prop.

IMPORTANT: The `render` prop, will supersede the `message` prop, if both are present.

<Canvas>
  <Story name="With Render Function">
    {() => {
      const renderMyMessage = () => (
        <p>Looks like something went wrong. But I'm using a render function.</p>
      );
      return (
        <Box direction="row">
          <Badge
            render={renderMyMessage}
            variant="danger"
          />
        </Box>
      );
    }}
  </Story>
</Canvas>

## Closable

The badge can be made closable by passing the `isClosable` prop. Note that this only controls the prescence of
the close icon, but closing actually happens programmatically with a callback passed to the `onClose` prop.
If you need custom close text, pass it in the `closeText` prop.

<Canvas>
  <Story name="Closable">
    {() => {
      const [isBadgeTwoShowing, setBadgeTwoShowing] = useState(true);
      const [isBadgeThreeShowing, setBadgeThreeShowing] = useState(true);
      return (
        <>
          <Box direction="row">
            <Badge
              message="Closable, but with no onClose callback so nothing happens when clicked."
              variant="warning"
              isClosable
              className="m-bottom-md"
            />
          </Box>
          {isBadgeTwoShowing ? (
            <Box direction="row">
              <Badge
                message="This one works!"
                variant="info"
                isClosable
                onClose={() => setBadgeTwoShowing(false)}
                className="m-bottom-md"
              />
            </Box>
          ) : (
            <div className="m-bottom-md">
              <Button onClick={() => setBadgeTwoShowing(true)} size="sm">Give me the second badge back!</Button>
            </div>
          )}
          {isBadgeThreeShowing ? (
            <Box direction="row">
              <Badge
                message="With custom close text!"
                variant="info"
                isClosable
                onClose={() => setBadgeThreeShowing(false)}
                closeText="Close me!"
              />
            </Box>
          ) : (
            <div className="m-bottom-md">
              <Button onClick={() => setBadgeThreeShowing(true)} size="sm">Give me the third badge back!</Button>
            </div>
          )}
        </>
      );
    }}
  </Story>
</Canvas>
