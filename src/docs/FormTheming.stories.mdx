import { Meta, Story, Canvas } from '@storybook/addon-docs';
import { useState } from 'react';
import { TextInput } from '../components/TextInput/TextInput';
import { CheckboxInput } from '../components/CheckboxInput/CheckboxInput';
import { SelectInput } from '../components/SelectInput/SelectInput';
import { SelectInputNative } from '../components/SelectInputNative/SelectInputNative';
import { OptionTileGroup } from '../components/OptionTileGroup/OptionTileGroup';
import { RadioGroup } from '../components/RadioGroup/RadioGroup';
import { TextareaInput } from '../components/TextareaInput/TextareaInput';
import { Toggle } from '../components/Toggle/Toggle';
import { Button } from '../components/Button/Button';
import { Box } from '../components/Box/Box';
import { TimePickerNative } from '../components/TimePickerNative/TimePickerNative';

<Meta title="Theming/Form Controls" />

# Theming Form Controls

Form controls share tokens since they are designed to have a consistent appearance (e.g. a TextInput and SelectInput look similar). Instead of redefining individual component specific tokens, the following tokens only need to be set once, and all form controls will take on their new appearance.

## Form Control Tokens

<table>
  <thead>
    <tr>
      <th>token name</th>
      <th>default value</th>
    </tr>
  </thead>
  <tbody>
    {(() => {
      const tokens = {
        '--form-control-font-family': '--asset-fonts-body',
        '--form-control-label-font-weight': 'v--size-font-weight-bold',
        '--form-control-box-shadow-focus': '0 0 0 4px --color-brand-primary-light',
        '--form-control-box-shadow': '0 3px 0 rgba(0, 0, 0, 0.05)',
        '--form-control-background-color': '--color-brand-white-base',
        '--form-control-size-xs-border-radius': '--size-border-radius-sm',
        '--form-control-size-xs-font-size': '--size-font-xs',
        '--form-control-size-xs-padding': '--size-spacing-2xs',
        '--form-control-size-sm-border-radius': '--size-border-radius-sm',
        '--form-control-size-sm-font-size': '--size-font-sm',
        '--form-control-size-sm-padding': '--size-spacing-xs',
        '--form-control-size-md-border-radius': '--size-border-radius-md',
        '--form-control-size-md-font-size': '--size-font-md',
        '--form-control-size-md-padding': '--size-spacing-sm',
        '--form-control-size-lg-border-radius': '--size-border-radius-lg',
        '--form-control-size-lg-font-size': '--size-font-lg',
        '--form-control-size-lg-padding': '--size-spacing-md',
      };
      return Object.entries(tokens).map(([name, entry], i) => (
        <tr key={i}>
          <td>
            <code>{name}</code>
          </td>
          <td>
            <code>{entry}</code>
          </td>
        </tr>
      ));
    })()}
  </tbody>
</table>

<Canvas>
  <Story name="Form Theming">
    {() => {
      const options = [
        {
          id: 'car',
          value: 'car',
          label: 'Car',
        },
        {
          id: 'truck',
          value: 'truck',
          label: 'Truck',
        },
        {
          id: 'motorcycle',
          value: 'motorcycle',
          label: 'Motorcycle',
        },
      ];
      const [isThemed, setIsThemed] = useState(true);
      const [themeExampleValues, setThemeExampleValues] = useState({
        multiSelectValue: [
          {
            id: 'motorcycle',
            value: 'motorcycle',
            label: 'Motorcycle',
          },
          {
            id: 'truck',
            value: 'truck',
            label: 'Truck',
          },
        ],
        optionTileGroupValue: options[0].value,
        radioValue: options[0].value,
        selectValue: options[0].value,
        textValue: 'hello world',
        textareaValue: 'hello world',
      });
      const handleChange = (key, value) => {
        setThemeExampleValues(prevFields => ({
          ...prevFields,
          [key]: value,
        }));
      };
      const customTheme = {
        '--form-control-size-md-border-radius': 0,
        '--form-control-size-md-padding': '0.5rem',
        '--form-control-font-family': 'Consolas,monaco,monospace',
        '--form-control-border-color': '#805AD5',
        '--form-control-background-color': 'red',
      };
      return (
        <Box
          childGap="lg"
          background="white"
          borderWidth="xs"
          borderColor="grey-100"
          padding="3xl"
          display="block"
          style={isThemed ? customTheme : null}
        >
          <Toggle
            label="Toggle Custom Theme"
            isChecked={isThemed}
            onChange={e => setIsThemed(e.target.checked)}
          />
          <Box background="grey-50" padding="lg" childGap="lg">
            <Heading size="lg" as="h4">
              Form Inputs
            </Heading>
            <TextInput
              id="demo"
              helpText="This is a themed text input"
              label="Text Input"
              value={themeExampleValues.textValue}
              onChange={event => handleChange('textValue', event.target.value)}
            />
            <SelectInputNative
              id="default Select"
              label="Select Input"
              onChange={event => handleChange('selectValue', event.target.value)}
              options={options}
              value={themeExampleValues.selectValue}
            />
            <SelectInput
              id="multiSelect"
              name="multiSelect"
              label="Multi-Select Input"
              isMulti
              value={themeExampleValues.multiSelectValue}
              menuPortalTarget={document.body}
              options={options}
              onChange={event => handleChange('multiSelectValue', event.target.value)}
            />
            <TextareaInput
              label="Textarea Input"
              name="textareaInput"
              id="textareaInput"
              value={themeExampleValues.textareaValue}
              onChange={e => handleChange('textareaValue', e.target.value)}
            />
            <Box direction="row" childGap="md">
              <CheckboxInput
                id="checkedCheckbox"
                label="Checked Checkbox"
                onChange={() => {}}
                isChecked
              />
              <CheckboxInput
                id="uncheckedCheckbox"
                label="Unchecked Checkbox"
                onChange={() => {}}
              />
            </Box>
            <RadioGroup
              title="Radio Group"
              name="radioGroup"
              onChange={event => handleChange('radioValue', event.target.value)}
              value={themeExampleValues.radioValue}
              options={options}
              direction="row"
            />
            <OptionTileGroup
              name="directionVertical"
              value={themeExampleValues.optionTileGroupValue}
              onChange={event => handleChange('optionTileGroupValue', event.target.value)}
              options={options}
              direction="row"
            />
          </Box>
        </Box>
      );
    }}
  </Story>
</Canvas>
